<% select_name ||= params[:select_name] %>

<div id=<%= select_name + '[state_code]' %>>
  <% parent_region ||= params[:parent_region] %>
  <% country = Carmen::Country.coded(parent_region) %>

  <% if country.nil? %>
    <em>Please select a country below</em>
  <% elsif country.subregions? %>
    <%= subregion_select(select_name, :state_code, parent_region, selected: country) %>
  <% else %>
    <%= text_field(select_name, :state_code) %>
  <% end %>
</div>